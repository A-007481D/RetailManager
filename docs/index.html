<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RetailManager - Gestion de Factures & Inventaire</title>
    <meta name="description"
        content="Application de gestion de factures et inventaire pour les petites entreprises. Téléchargez gratuitement RetailManager.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="hero">
        <div class="hero-content">
            <div class="badge" id="version-badge">Chargement...</div>
            <h1>RetailManager</h1>
            <p class="tagline">Gestion professionnelle de factures & inventaire pour votre entreprise</p>

            <div class="download-section">
                <a href="https://github.com/A-007481D/RetailManager/releases" id="download-btn" class="download-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                        <polyline points="7 10 12 15 17 10"></polyline>
                        <line x1="12" y1="15" x2="12" y2="3"></line>
                    </svg>
                    <span id="download-text">Télécharger pour Windows</span>
                </a>
                <span class="file-info" id="file-info">Chargement des informations...</span>
            </div>

            <a href="https://github.com/A-007481D/RetailManager/releases" class="releases-link">
                Voir toutes les versions →
            </a>
        </div>
    </div>

    <section class="features">
        <h2>Fonctionnalités</h2>
        <div class="features-grid">
            <div class="feature-card">
                <div class="feature-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                        <polyline points="14 2 14 8 20 8"></polyline>
                        <line x1="16" y1="13" x2="8" y2="13"></line>
                        <line x1="16" y1="17" x2="8" y2="17"></line>
                        <polyline points="10 9 9 9 8 9"></polyline>
                    </svg>
                </div>
                <h3>Factures PDF</h3>
                <p>Générez des factures professionnelles en PDF avec calcul automatique de TVA</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path
                            d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z">
                        </path>
                        <polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline>
                        <line x1="12" y1="22.08" x2="12" y2="12"></line>
                    </svg>
                </div>
                <h3>Gestion Stock</h3>
                <p>Suivez votre inventaire en temps réel avec alertes de stock bas</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                        <circle cx="9" cy="7" r="4"></circle>
                        <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                        <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                    </svg>
                </div>
                <h3>Clients</h3>
                <p>Base de données clients avec recherche rapide et historique</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="18" y1="20" x2="18" y2="10"></line>
                        <line x1="12" y1="20" x2="12" y2="4"></line>
                        <line x1="6" y1="20" x2="6" y2="14"></line>
                    </svg>
                </div>
                <h3>Tableau de Bord</h3>
                <p>Visualisez votre chiffre d'affaires et activité récente</p>
            </div>
        </div>
    </section>

    <section class="update-info">
        <h2>Comment Mettre à Jour</h2>
        <div class="update-steps">
            <div class="step">
                <span class="step-number">1</span>
                <p>Téléchargez le nouveau installateur</p>
            </div>
            <div class="step">
                <span class="step-number">2</span>
                <p>Lancez l'installation (vos données sont préservées)</p>
            </div>
            <div class="step">
                <span class="step-number">3</span>
                <p>C'est tout ! Profitez des nouvelles fonctionnalités</p>
            </div>
        </div>
        <div class="data-safe">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
            </svg>
            <p><strong>Vos données sont en sécurité.</strong> Les factures, clients et produits sont stockés séparément
                et ne sont jamais supprimés lors des mises à jour.</p>
        </div>
    </section>

    <section class="changelog">
        <h2>Dernières Nouveautés</h2>
        <div class="version-card" id="changelog-container">
            <p style="color: var(--text-muted);">Chargement...</p>
        </div>
    </section>

    <footer>
        <p>© 2026 RetailManager. Tous droits réservés.</p>
        <p class="footer-links">
            <a href="https://github.com/A-007481D/RetailManager">GitHub</a>
        </p>
    </footer>

    <script>
        const GITHUB_API = 'https://api.github.com/repos/A-007481D/RetailManager/releases/latest';

        function formatBytes(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            const months = ['Janvier', 'Février', 'Mars', 'Avril', 'Mai', 'Juin',
                'Juillet', 'Août', 'Septembre', 'Octobre', 'Novembre', 'Décembre'];
            return `${months[date.getMonth()]} ${date.getFullYear()}`;
        }

        async function loadLatestRelease() {
            try {
                const response = await fetch(GITHUB_API);

                if (!response.ok) {
                    throw new Error('No releases found');
                }

                const release = await response.json();

                // Find the Windows exe asset
                const asset = release.assets.find(a => a.name.endsWith('.exe'));

                if (asset) {
                    // Update download button
                    document.getElementById('download-btn').href = asset.browser_download_url;
                    document.getElementById('file-info').textContent =
                        `${asset.name} • ${formatBytes(asset.size)}`;
                } else {
                    document.getElementById('file-info').textContent = 'Téléchargement bientôt disponible';
                }

                // Update version badge
                document.getElementById('version-badge').textContent = `${release.tag_name} • Windows`;

                // Update changelog
                const changelogHtml = `
                    <div class="version-header">
                        <span class="version-tag">${release.tag_name}</span>
                        <span class="version-date">${formatDate(release.published_at)}</span>
                    </div>
                    <div class="release-notes">${release.body ?
                        release.body.split('\n').filter(l => l.trim()).map(l => `<p>${l}</p>`).join('') :
                        '<p>Mise à jour de maintenance</p>'
                    }</div>
                `;
                document.getElementById('changelog-container').innerHTML = changelogHtml;

            } catch (error) {
                console.error('Error loading release:', error);
                // Fallback to static content
                document.getElementById('version-badge').textContent = 'v1.1.0 • Windows';
                document.getElementById('download-btn').href =
                    'https://github.com/A-007481D/RetailManager/releases';
                document.getElementById('file-info').textContent =
                    'Voir les versions disponibles sur GitHub';
                document.getElementById('changelog-container').innerHTML = `
                    <div class="version-header">
                        <span class="version-tag">v1.1.0</span>
                        <span class="version-date">Janvier 2026</span>
                    </div>
                    <ul>
                        <li>✅ Messages d'erreur en français</li>
                        <li>✅ Protection contre la suppression accidentelle</li>
                        <li>✅ Validation avancée des factures</li>
                    </ul>
                `;
            }
        }

        // Load on page ready
        document.addEventListener('DOMContentLoaded', loadLatestRelease);
    </script>
</body>

</html>